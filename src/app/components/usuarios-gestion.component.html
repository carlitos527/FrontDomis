<div class="container mt-5">
  <h2 class="text-center mb-4 text-primary fw-bold">ğŸ‘¥ GestiÃ³n de Usuarios</h2>

  <!-- SecciÃ³n: Usuario actual -->
  <div *ngIf="usuarioActual; else cargando" class="card p-3 mb-4 shadow-sm border-0">
    <h5 class="text-secondary mb-3">InformaciÃ³n del usuario actual</h5>
    <p><strong>ğŸ‘¤ Nombre:</strong> {{ usuarioActual.nombreUsuario }}</p>
    <p><strong>ğŸ§© Rol:</strong> 
      <span class="badge bg-info text-dark">{{ usuarioActual.rol }}</span>
    </p>
  </div>

  <ng-template #cargando>
    <div class="text-center text-muted">
      <div class="spinner-border text-primary me-2" role="status"></div>
      Cargando informaciÃ³n...
    </div>
  </ng-template>

  <hr class="my-4" />

  <!-- SecciÃ³n: Crear nuevo usuario -->
  <div class="card p-4 shadow-sm border-0">
    <h5 class="text-success mb-3">â• Crear nuevo usuario</h5>

    <form (ngSubmit)="registrarUsuario()" #formUsuario="ngForm" novalidate>
      <!-- Nombre -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Nombre de usuario</label>
        <input 
          type="text" 
          class="form-control" 
          [(ngModel)]="nuevoUsuario.nombreUsuario" 
          name="nombreUsuario" 
          required
          minlength="3"
          placeholder="Ejemplo: juanperez" />
        <div *ngIf="formUsuario.submitted && formUsuario.controls['nombreUsuario']?.invalid" class="text-danger small mt-1">
          El nombre de usuario es obligatorio (mÃ­nimo 3 caracteres)
        </div>
      </div>

      <!-- ContraseÃ±a -->
      <div class="mb-3">
        <label class="form-label fw-semibold">ContraseÃ±a</label>
        <input 
          type="password" 
          class="form-control" 
          [(ngModel)]="nuevoUsuario.password" 
          name="password" 
          required
          minlength="4"
          placeholder="ContraseÃ±a segura" />
        <div *ngIf="formUsuario.submitted && formUsuario.controls['password']?.invalid" class="text-danger small mt-1">
          La contraseÃ±a debe tener al menos 4 caracteres
        </div>
      </div>

      <!-- Rol -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Rol del usuario</label>
        <select 
          class="form-select" 
          [(ngModel)]="nuevoUsuario.rol" 
          name="rol" 
          required>
          <option value="">Seleccionar rol</option>
          <option value="Admin">Administrador</option>
      <option value="Clientes">Cliente</option>
      <option value="Domiciliario">Domiciliario</option>
        </select>
        <div *ngIf="formUsuario.submitted && formUsuario.controls['rol']?.invalid" class="text-danger small mt-1">
          Debes seleccionar un rol
        </div>
      </div>

      <!-- BotÃ³n -->
      <div class="d-grid">
        <button 
          type="submit" 
          class="btn btn-primary fw-semibold" 
          [disabled]="formUsuario.invalid">
          ğŸš€ Registrar Usuario
        </button>
      </div>
    </form>

    <!-- Mensajes -->
    <div *ngIf="mensaje" class="alert alert-success mt-3 fade show">{{ mensaje }}</div>
    <div *ngIf="error" class="alert alert-danger mt-3 fade show">{{ error }}</div>
  </div>
</div>
